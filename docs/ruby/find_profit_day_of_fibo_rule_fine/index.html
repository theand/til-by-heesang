<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>2018-12에 적용된 피보나치 벌금 제도 하에서 개이득 구간 보기 - Heesang's TIL</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "2018-12\uc5d0 \uc801\uc6a9\ub41c \ud53c\ubcf4\ub098\uce58 \ubc8c\uae08 \uc81c\ub3c4 \ud558\uc5d0\uc11c \uac1c\uc774\ub4dd \uad6c\uac04 \ubcf4\uae30";
    var mkdocs_page_input_path = "ruby/find_profit_day_of_fibo_rule_fine.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Heesang's TIL</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Heesang's TIL</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
    
    <li>2018-12에 적용된 피보나치 벌금 제도 하에서 개이득 구간 보기</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="2018-12">2018-12에 적용된 피보나치 벌금 제도 하에서 개이득 구간 보기</h1>
<p>TIL 모임에서 12월에는 결석일수에 따른 벌금제도에 피보나치 수를 적용하기로 했다. n번째 결석일의 벌금이 피보나치 수 규칙에 따라 증가하는 것이다. 그렇다면 결석일수에 따른 월 총 벌금액은 기존의 하루 1000원으로 고정된 벌금제도와 비교해서 어느 구간이 <code>개이득</code> 인지 궁금해져서 찾아봄.</p>
<pre><code>fib(n) = fib(n-1) + fib(n-2)
f(0)=0, f(1)=100 으로 정의
결석일이 n일 일경우 12월 총 벌금액 :  \sum{i=1}^{n} fib(i)
</code></pre>

<p>피보나치 함수 구현은 <a href="https://rosettacode.org/wiki/Fibonacci_sequence#Recursive_with_Memoization_4">로제타 코드</a>에 있는 버전을 가져다 씀.</p>
<h2 id="_1">코드</h2>
<pre><code class="ruby">

#https://rosettacode.org/wiki/Fibonacci_sequence#Recursive_with_Memoization_4 가져다 고쳐씀.

fib_fine = Hash.new do |f, n|
  f[n] = if n == 0
           0
         elsif n == 1
           n * 100
         else
           f[n - 1] + f[n - 2]
         end
end

accumulated_fib_fine = Hash.new do |f,n|
  f[n] = (1..n).sum{|x| fib_fine[x] }
end

def filter_max_for_fibo(x)
  if x &gt; 50000
    50000
  else
    x
  end
end

accumulated_fixed_fine = Hash.new do |f,n|
  f[n] = n*1000
end


puts &quot;결석일\tacc_fixed\tacc_fibo\tacc_fibo_filtered\t구간&quot;
(1..31).each do |n|
    fib_original_sum = accumulated_fib_fine[n]
    fib_filtered_sum = filter_max_for_fibo accumulated_fib_fine[n]
    fixed_sum = accumulated_fixed_fine[n]
    msg = if fib_original_sum &lt; fixed_sum then &quot;개이득&quot; else &quot;노이득&quot; end
    printf &quot;#{n}\t%12s\t%12s\t%12s\t#{msg}\n&quot; , fixed_sum, fib_original_sum, fib_filtered_sum
end
</code></pre>

<h2 id="_2">결과</h2>
<pre><code class="tsv">결석일 acc_fixed   acc_fibo    acc_fibo_filtered   구간
1           1000             100             100    개이득
2           2000             200             200    개이득
3           3000             400             400    개이득
4           4000             700             700    개이득
5           5000            1200            1200    개이득
6           6000            2000            2000    개이득
7           7000            3300            3300    개이득
8           8000            5400            5400    개이득
9           9000            8800            8800    개이득
10         10000           14300           14300    노이득
11         11000           23200           23200    노이득
12         12000           37600           37600    노이득
13         13000           60900           50000    노이득
14         14000           98600           50000    노이득
15         15000          159600           50000    노이득
16         16000          258300           50000    노이득
17         17000          418000           50000    노이득
18         18000          676400           50000    노이득
19         19000         1094500           50000    노이득
20         20000         1771000           50000    노이득
21         21000         2865600           50000    노이득
22         22000         4636700           50000    노이득
23         23000         7502400           50000    노이득
24         24000        12139200           50000    노이득
25         25000        19641700           50000    노이득
26         26000        31781000           50000    노이득
27         27000        51422800           50000    노이득
28         28000        83203900           50000    노이득
29         29000       134626800           50000    노이득
30         30000       217830800           50000    노이득
31         31000       352457700           50000    노이득
</code></pre>
              
            </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
